# 데이터 내보내기/가져오기(Export/Import) 설계 계획서

## 1. 프로젝트 데이터 구조 분석

- **전체자료실**: 모든 자료(성경자료실+일반자료실)의 통합 테이블(뷰 역할)
- **성경자료실**: 주로 HTML 자료(성경 주석, 연구노트 등)
- **일반자료실**: 이미지, 문서, PDF 등 다양한 파일
- **자료 저장 구조**: 자료가 성경자료실/일반자료실에 저장되면 전체자료실에 자동 연동되어 보여짐(중복 저장 X, 뷰/필터 개념)

## 2. 내보내기/가져오기 파일 포맷 결정

- **zip 파일**을 기본 포맷으로 사용
  - 내부에 자료별 메타데이터(JSON) + 실제 파일(Blob) 포함
  - 예시 구조:
    - `bible-room/metadata.json` + `bible-room/자료1.html` ...
    - `general-room/metadata.json` + `general-room/이미지1.png` ...
- **이유**: 다양한 파일(텍스트, 이미지, PDF 등)과 메타데이터를 하나의 파일로 안전하게 묶어야 하며, 브라우저 환경에서 JS로 zip 생성/해제 가능

## 3. 내보내기/가져오기 UI/UX 설계

- **데이터 관리 > 데이터 내보내기/가져오기**
  - [ ] 성경자료실 데이터 내보내기/가져오기
  - [ ] 일반자료실 데이터 내보내기/가져오기
  - 전체자료실은 별도 내보내기/가져오기 UI 불필요(자동 연동)
- **내보내기**: 버튼 클릭 시 zip 파일 다운로드
- **가져오기**: zip 파일 업로드 시 자료 복원(중복/충돌 처리)
- **진행상태/결과**: 토스트 메시지, 진행률(%) 표시 등

## 4. 데이터 내보내기/가져오기 상세 로직

### 4.1 내보내기(Export)
- 성경자료실/일반자료실 각각 별도의 내보내기 UI/UX 제공
- 선택한 자료실(성경/일반) 자료만 추출
- 각 자료의 메타데이터(JSON) + 파일(Blob) zip으로 묶음
- 내보내기 파일명 예시:
  - 성경자료실: `YYYY-MM-DD-bible-room-export.zip`
  - 일반자료실: `YYYY-MM-DD-general-room-export.zip`

### 4.2 가져오기(Import)
- zip 파일 업로드 → 해제
- 메타데이터 파싱, 파일 복원
- 기존 자료와 ID 중복 시 덮어쓰기/신규 저장 정책
- 전체자료실은 자동 연동(별도 처리 불필요)

## 5. 예외/에러 처리
- 파일 포맷 오류, 용량 초과, 중복/충돌 등 예외 처리
- 사용자에게 명확한 피드백 제공(토스트, 경고 등)

## 6. 확장성 및 보안
- 향후 전체자료실/카테고리/설정 등 확장 고려
- 민감 정보/개인정보 포함 금지, 파일 무결성 체크

---

> 본 계획서는 데이터 내보내기/가져오기 기능의 구조적 설계와 UI/UX, 예외처리, 확장성까지 고려한 개발 가이드입니다. 