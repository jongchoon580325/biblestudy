# bible-storage-structure-TODO.md

## 1. 아키텍처/스토리지 설계
- [x] IndexedDB/LocalStorage 스키마 설계 및 구현
  - [x] 자료 테이블(materials), 동기화 큐(sync_queue), 설정(app_metadata) 등
  - [x] Supabase 테이블/스토리지 구조 설계 및 연동
  - [ ] 자료, 카테고리, 동기화 로그 등
    - [x] Supabase categories(카테고리) 테이블 생성 및 스키마 정의
    - [x] Supabase sync_logs(동기화 로그) 테이블 생성 및 스키마 정의
    - [x] 프론트엔드 타입/유틸에 categories, sync_logs 타입 추가
    - [x] 카테고리 조회/등록/수정/삭제 API 연동
    - [x] 동기화 로그 기록/조회 API 연동

## 2. 자료 CRUD 및 하이브리드 저장
- [x] 자료 등록/수정/삭제 로컬 우선 구현 (IndexedDB)
- [x] 자료 조회(오프라인 우선, 최신화 시 서버 동기화)
- [x] 자료 삭제(soft delete, 동기화 큐 반영)

## 3. 동기화 엔진/큐
- [x] 동기화 큐(sync_queue) 구조 및 로직 구현
- [x] 네트워크 상태 감지 및 자동/수동 동기화 트리거
- [x] Supabase API 연동(자료 push/pull, 상태 갱신)
- [x] 동기화 상태 계산(sync_status, storage_location)

## 4. 충돌 감지/해결
- [x] 버전/타임스탬프 기반 충돌 감지 로직
- [x] 충돌 상태 표시 및 UI(뱃지, 다이얼로그)
- [x] 수동/자동 병합 프로세스 구현

## 5. UI/UX 및 상태 표시
- [x] 테이블/상세/미리보기 등 상태 컬럼/뱃지/아이콘 일관 적용
- [x] 저장 위치(storage_location) 및 마지막 동기화 시간 표시
- [x] 상태별 필터/검색/통계 기능
- [x] 동기화/충돌/에러 알림 시스템

## 6. 테스트/최적화
- [ ] 대용량/오프라인/충돌/복원 시나리오 테스트
- [x] 성능 최적화(청킹, 캐시, 배치 동기화 등)
- [x] 에러/예외 처리 및 복구 로직 강화

## 7. 문서화/운영
- [x] README/아키텍처/동기화/충돌/운영 가이드 작성
- [x] 신규 개발자 온보딩/운영 매뉴얼

---
## 8. 동기화 단계별 점검 순서
1. [x] 동기화 트리거(자동/수동) 코드가 실제로 실행되고 있는지 확인
2. [x] 동기화 큐(sync_queue)에 pending/processing 작업이 남아 있는지 점검
3. [x] Supabase API 호출(자료 push/pull) 로그 및 에러 메시지 확인
4. [x] 동기화 성공/실패 시 상태(sync_status, storage_location) 변화 관찰
5. [ ] 문제 원인(트리거 미작동, API 오류, 인증/권한 등)별로 코드/설정 보완

> 각 항목은 실제 하이브리드 저장/동기화 시스템의 실전 구현을 위한 액션 단위로, 우선순위와 체크리스트 형태로 작성되었습니다. 