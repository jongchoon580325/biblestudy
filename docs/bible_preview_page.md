# 성경자료실 상세 미리보기(Preview) 페이지 PRD

## 1. 목적
- 성경자료실 권별 자료목록 테이블에서 '미리보기' 클릭 시, 파일 상세 미리보기 페이지로 이동
- 파일 확장자별로 최적화된 미리보기/수정/전체보기/다운로드 기능 제공
- 실전 자료 관리에 필요한 직관적이고 강력한 UX/프로세스 구현

---

## 2. 주요 프로세스 및 기능

### 2.1 진입 및 라우팅
- **진입:** 권별 자료목록 테이블의 '미리보기' 아이콘 클릭 시 상세 미리보기 페이지로 이동
- **라우트 예시:** `/bible/[book]/preview/[materialId]`

### 2.2 상세 미리보기 페이지 구성 (3단 구조)

#### 1단
- (좌) 뒤로가기(아이콘)
- (중앙) 파일명

#### 2단
- (좌) 수정, 다운로드, 전체보기 (Lucide 아이콘)
- (오른쪽) 상태(동기화됨 등)

#### 3단
- [파일 미리보기 영역] (확장자별 렌더링)
- [소스편집 기능 실행 영역] (수정 시 활성화)

---

## 3. 파일 확장자별 미리보기/수정/전체보기 정책

### 3.1 미리보기 지원 확장자
- **텍스트/코드:** `html`, `txt`, `md`, `csv`
  - 인라인 소스 미리보기 + 실시간 렌더링(HTML/MD)
  - '수정' 버튼 활성화
- **PDF/이미지:** `pdf`, `jpg`, `jpeg`, `png`, `gif`, `bmp`, `webp`
  - 전용 뷰어/이미지 미리보기
  - '수정' 버튼 비활성화
- **기타:**
  - 아이콘+파일명만 표시, 다운로드만 가능

### 3.2 수정(소스편집기) 기능
- **수정 버튼:** 텍스트/코드 파일만 활성화, 기타 확장자는 비활성화(비활성화 시 Tooltip 안내)
- **수정 클릭 시:**
  - (좌) 소스편집기(CodeMirror 등)
  - (우) 실시간 미리보기(HTML/MD 렌더링)
  - '수정' 버튼 클릭 또는 'Enter' 키로 저장
  - 저장 시 원본/미리보기 동기화

### 3.3 전체보기(FullScreen) 기능
- **전체보기 버튼:** 미리보기 영역을 화면 전체로 확장
- **종료:** ESC 키 또는 [X] 아이콘 클릭 시 본래 미리보기 페이지로 복귀

### 3.4 다운로드
- **다운로드 버튼:** 파일 다운로드(아이콘)

---

## 4. UI/UX 및 접근성
- 모든 주요 버튼은 Lucide 아이콘으로만 표시(텍스트 최소화, Tooltip 제공)
- 반응형/다크모드/접근성(A11y) 지원
- 에러/로딩/권한 등 상태 명확하게 안내

---

## 5. 데이터 구조 및 연동
- `materialId`로 자료 상세 fetch (DB/API)
- 파일 미리보기용 URL/소스, 메타데이터 포함
- 저장/수정/다운로드/전체보기 등 API 연동 고려

---

## 6. 예시 라우트/컴포넌트 구조
- `/bible/[book]/preview/[materialId]`
- `<PreviewPage />`, `<FilePreview />`, `<SourceEditor />`, `<FullScreenModal />` 등 컴포넌트 분리

---

## 7. 기타
- 삭제 기능은 미제공(명확히 제외)
- 최근 열람/히스토리/버전관리 등 확장성 고려

---

## 8. 적용 범위 및 공통화
- 본 상세 미리보기(Preview) 페이지 로직/UX는 **성경자료실** 뿐만 아니라 **일반자료실** 테이블의 미리보기 기능에도 동일하게 적용한다.
- 즉, 일반자료실 자료목록 테이블의 '미리보기' 클릭 시에도 본 PRD의 구조/기능/정책을 그대로 따른다. 